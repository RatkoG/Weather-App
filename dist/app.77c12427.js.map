{"version":3,"sources":["src/js/Models/Current.js","src/js/Models/Search.js","src/js/Views/loaderView.js","src/js/Views/currentView.js","src/js/app.js"],"names":["getCurrentLocation","options","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","code","message","Object","assign","Error","name","Current","constructor","coords","getCoords","data","enableHighAccuracy","maximumAge","latitude","longitude","availableCoords","length","getWeather","api","endpoint","response","fetch","catch","handleError","results","json","weather","temp","Math","round","main","temp_max","temp_min","description","icon","err","console","log","Search","query","renderLoader","parent","html","insertAdjacentHTML","clearLoader","loader","querySelector","removeChild","renderCurrent","result","allIcons","keys","photo","map","key","iconsArray","flat","find","match","state","search","currentController","document","current","currentView","controlSearch","e","preventDefault","form","addEventListener"],"mappings":";;AICA;;AACA;;AAGA;AJLA,ACAe,AEAf,ADAO,MDAc8C,ACARE,GFAJhD,GCAM,CAAa,KCAH,GAAGiD,MFA5B,AEAkC,CFANhD,GEAU,IFAtC,EAAqC;AACnC,ACAAc,ACAA,AEKF,EHLEA,MCAMmC,CFAC,GEAG,CFAChD,ACAA,CAAC6C,CCAE,IDAH,CDAJ,CAAY,ACAA,CDAC5C,OAAD,EAAUC,MAAV,KAAqB;AACtCC,ACAA,IDAAA,KCAK0C,IDAI,CAACzC,ACAV,GAAayC,KAAb,GDAA,CAAsBxC,kBAAtB,CACEJ,OADF,EAEE,CAAC;AAAEK,ACDN,MDCMA,IAAF;AAAQC,AGFR,MHEQA,AGFF+C,aAAa,GAAG,CAACC,MAAD,EAASR,MAAT,KAAoB;AHE1C,ACCL,AEFA,KHCI,GCCExB,AEFAiC,EHEAtD,MAAM,AGFE,CHGNM,CCDR,CEFiBA,EFEE,EDCL,CAACC,CGHQ,CAACgD,IHGhB,AGHS,CHGK,AGHOC,IHGHhD,KAAJ,AGHL,CHGeH,CGHIoD,GAAnB,CAAwBC,EHGnB,CAAd,AGHgC,EHGE,EGHO;AHGLjD,ACA1C,AEFA,MHE0CA,IAAI,ACAxCa,CEFC,CHEyC,AGFxCkC,CFEC,SEFKE,GAAN,CAAD,CHEiC,AGFxC,uBFEA;ADAiEtD,ACCjE,AEFD,GAFgB,CAAjB,EHGmEA,ICC3DmB,QAAQ,GAAG,gDAAjB,CAFiB,CAGjB;ADFwC,AGC1C,KHDQ,CADI,CAHV,CGKIoC,CHCF9D,OANF,EGKc,GAAGyD,QAAQ,CAACM,IAAT,EAAnB;AHGC,ACDC,AEDF,ACRF,GJCS,CAAP,EGOItB,IFCId,AEDA,GAAGmC,KFCK,GAAG,EEDE,CAACE,GFCGpC,CEDd,CAAiBa,GFCE,CACzB,AEFsB,GFEpBf,CEF8Be,IAAI,CAACwB,EFE1B,GEFqB,CAAWT,EFE3B,IEFiC,CFE5BV,AEF6Bb,KFEvB,EEFgB,CAAeQ,IAA1B,CAA1B,CAAX,CFEyChB,GAAI,EADf,CAAL,CAErBI,KAFqB,CAEfC,WAFe,CAAvB;ADEH,ACCG,AEHF,ACLF,QDKQmB,CFGClB,GEHG,GAAI,CFGZ,GAAe,MAAMJ,QAAQ,CAACK,IAAT,EAArB;AACAW,AGLJ,IHKIA,EGLEuB,KHKK,AGLA,CHKCtB,EGLE,CHKV,CAAa,AGLjB,EACA,kBHIoC,KAAKhC,IAAK,sBAA1C;ADAW,ACCZ,MDDkBC,OAAN,CAAc;AAC3BC,AIHF,EJGEA,IIHIqD,MAAM,CJGC,EIHE,CJGC,GIHGtB,eAAJ,CAAW,MAAX,CAAf;AJII,ACfwB,AGY5BsB,MAAM,CAAC3C,EJGET,MAAL,EIHJ,CJGkB,EAAd,CIDJ;AJEG,GAH0B,CAK3B;AIHF,MAAMqD,iBAAiB,GAAG,YAAY;AACpC,QAAMpB,MAAM,GAAGqB,QAAQ,CAAChB,aAAT,CAAuB,OAAvB,CAAf;AJGA,ACHF,AGCED,EFhBA,AEgBAA,MJEMpC,AIFA,CHDCc,AGCAiB,QJEP,GAAkB,ACHpB,CAAqBL,AGCnB,CAAoBM,EHDtB,EAA0B,EGCxB;AJGE,ACHFL,ACEAK,AEDA,EHDAL,ACEAK,IEDI,CAACkB,CFCC,CDFC,ACEAhB,CFCCjC,ACHA2B,EGCE,CHDV,AGCW0B,CJEC,ACHA,GDGG,GIFf,EAAoBJ,CJECnE,IEDrB,AEDyB,CFCC,AEDAuE,OAAN,GAAgB,EFCpC,CFCuC,CAAC,AEDArB,AEDApC,IHDxC,ACEA,YEDoC,EAAhB;AJGhBK,ACHJyB,ACED,CApBM,CDkBLA,IDGIzB,GCHG,CAAC0B,GAAR,CAAYF,GAAZ,ODGsB,EAAE,IADgB;AAEpCvB,ACHL,AGAC,MJGIA,AIHA+C,KAAK,CAACI,CDCC7B,GHEG,CGFE,CHEA,CIHZ,CAAcnB,eAAd,KAAkC,CAAtC,EAAyC;AJCD,AIAtC,KJAqC,CAArC,IIAM4C,KAAK,CAACI,OAAN,CAActD,SAAd,EAAN;AJIA,AIHD,GANmC,CAQpC,KJCOD,MAAL,GAAc,CAACE,IAAI,CAACF,AGFAyC,MHEL,AGFW,CHECpC,AGFAR,IAAK,IHElB,EAAuBK,IAAI,CAACF,MAAL,CAAYM,SAAnC,CAAd;AACD,AEHI,MAAM8B,WAAW,GAAGH,MAAM,CCCNQ,GDDU,GCCJ,CAACvB,OAAP,CAAeC,IAAK;ADA7C,QAAMkB,MAAM,GAAGJ,MAAM,CAACK,MCCMG,MAAM,CAACvB,ADDpB,CAAqB,MCCR,CAAeO,EDD5B,CAAf,QCCuD;AHEvDlB,AEFA0B,AEAA,EJEA1B,AEFA0B,IEAIkB,EFAE,CAACZ,EEAE,CAACgB,KJEK,EIFX,CJEc,AEFlB,AEAkBhD,CFAC8B,KCCKI,CDDxB,KCC8B,CAACvB,ECD3B,KDCoB,CAAeM,CCDC,CAAxC,EAA2C,IDCK,aAAYiB,MAAM,CAACvB,OAAP,CAAeK,QAAS;AHElF,AEFH,AEAG,CFHG,SEGG4B,CJEC,IIFI,CJECnD,AIFAuD,MJEL,CAAY/C,AIFb,CAAcC,KJEpB,KIFM,EAAN;AJGD,AIFC4B,IAAAA,MAAM,CAACD,WAAP,CAAmBH,MAAnB;AACAuB,IAAAA,WAAW,CAAChB,aAAZ,CAA0BW,KAAK,CAACI,OAAhC,EAAyCtB,MAAzC;AJGF,AIFC,EDnBD,MHqBMxB,UAAN,GAAmB;AACjB,AGDFwB,ACDD,CAdD,CDeEA,MAAM,CAACE,CHCCzB,GAAG,cGDX,CAA0B,YAA1B,EAAwCwB,IAAxC,IHCE;AACA,AGDH,CA7BM,SH8BGvB,QAAQ,GAAG,gDAAjB,CAFiB,CAGjB;AACA,AIHJ0C,iBAAiB,IAEjB;;AJEI,AIDJ,MAAMI,IJCI7C,QAAQ,CIDC,EJCE,CIDC,KJCKC,CIDE6C,CAAP,GJCU,CACzB,AIF4B,GJE1B/C,QAAS,QAAO,KAAKX,MAAL,CAAY,CAAZ,CAAe,QAAO,KAAKA,MAAL,CAAY,CAAZ,CAAe,uBAAsBU,GAAI,EADxD,CAAL,CAErBI,KAFqB,CAEfC,WAFe,CAAvB;AAGA,AIHF2C,EAAAA,CAAC,CAACC,KJGK3C,OAAL,EIHF,CJGiB,MAAMJ,QAAQ,CAACK,IAAT,EAArB;AACA,AIHF,QAAMc,CJGClC,IAAL,AIHS,GJGG,AIHA,KJGKmB,MIHnB,CJGc,CAAanB,IAAzB;AACA,SAAKqB,OAAL,GAAe;AACbC,AIJJ,MJIIA,AIJAY,IJII,CIJR,CJIUX,CIJC,GJIG,CAACC,KAAL,CAAW,KAAKL,OAAL,CAAaM,IAAb,CAAkBH,IAA7B,CADO;AAEbI,AIJF4B,IAAAA,EJIE5B,GIJG,CAAC6B,IJII,EAAEhC,AIJZ,GAAe,CJIC,CAACC,EIJES,GJIP,CAAW,KAAKd,MIJb,CJIQ,AIJGe,CJIUT,IAAb,AIJR,CJI0BC,AIJzC,QJIY,CAFG;AAGbC,AIJF,MJIEA,IIJI2B,IJII,CIJC,CJIC/B,AIJAgC,IJII,CAAC/B,CIJX,CAAaZ,GJIP,CAAW,KAAKO,CIJtB,EAAN,IJIuB,CAAaM,IAAb,CAAkBE,QAA7B,CAHG;AAIbC,AIJFG,IAAAA,EJIEH,KIJK,CAACI,GAAR,CAAYsB,CJIC,EAAE,EIJE,CAACC,EJIEpC,IIJR,CAAaA,EJIV,CAAaE,IIJ5B,GJIe,CAAqB,CAArB,EAAwBI,IAJxB;AAKbI,AIJH,MJIGA,IAAI,EAAE,KAAKV,OAAL,CAAaE,OAAb,CAAqB,CAArB,EAAwBQ;AALjB,AIElB,CARD,EAUA,EJJI;AAOD;;AAlC0B,AIgC7B,MAAMkC,IAAI,GAAGN,QAAQ,CAAChB,aAAT,CAAuB,eAAvB,CAAb;AACAsB,IAAI,CAACC,gBAAL,CAAsB,QAAtB,EAAgCJ,aAAhC,GAEA;;AACA7B,OAAO,CAACC,GAAR,CAAYsB,KAAK,CAACI,OAAlB;AJCA,SAASxC,WAAT,CAAqBY,GAArB,EAA0B;AACxBC,EAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD","file":"app.77c12427.js","sourceRoot":"..","sourcesContent":["function getCurrentLocation(options) {\n  return new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(\n      resolve,\n      ({ code, message }) =>\n        reject(\n          Object.assign(new Error(message), { name: 'PositionError', code })\n        ),\n      options\n    );\n  });\n}\n\nexport default class Current {\n  constructor() {\n    this.coords = [];\n  }\n\n  // TODO: IF this is called from the controller handle the error over there\n  async getCoords() {\n    const data = await getCurrentLocation({\n      enableHighAccuracy: true,\n      maximumAge: 0,\n    });\n    this.coords = [data.coords.latitude, data.coords.longitude];\n  }\n  availableCoords() {\n    return this.coords.length;\n  }\n\n  async getWeather() {\n    const api = process.env.API_KEY;\n    const endpoint = 'http://api.openweathermap.org/data/2.5/weather';\n    // TODO: Move .catch if you want to catch the error on so other place.  Ex When the function is called\n    // TODO: Remove Units= Metric if you decide to do calculation for C and F\n    const response = await fetch(\n      `${endpoint}?lat=${this.coords[0]}&lon=${this.coords[1]}&units=metric&appid=${api}`\n    ).catch(handleError);\n    this.results = await response.json();\n    this.name = this.results.name;\n    this.weather = {\n      temp: Math.round(this.results.main.temp),\n      temp_max: Math.round(this.results.main.temp_max),\n      temp_min: Math.round(this.results.main.temp_min),\n      description: this.results.weather[0].main,\n      icon: this.results.weather[0].icon,\n    };\n  }\n}\n\nfunction handleError(err) {\n  console.log('Ups... Something went wrong ðŸ’©');\n  console.log(err);\n}\n","export default class Search {\n  constructor(query) {\n    this.query = query;\n  }\n\n  async getWeather() {\n    const api = process.env.API_KEY;\n    const endpoint = 'http://api.openweathermap.org/data/2.5/weather';\n    // TODO: Move .catch if you want to catch the error on so other place.  Ex When the function is called\n    const response = await fetch(\n      `${endpoint}?q=${this.query}&appid=${api}`\n    ).catch(handleError);\n    this.results = await response.json();\n    console.log(`Your location is ${this.name} and the weather is `);\n  }\n}\nfunction handleError(err) {\n  console.log('Ups... Something went wrong ðŸ’©');\n  console.log(err);\n}\n","export const renderLoader = parent => {\n  const html = `\n\t<div class=\"loader\">\n        <div class=\"lds-default\">\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n\t`;\n  parent.insertAdjacentHTML('afterbegin', html);\n};\n\nexport const clearLoader = parent => {\n  const loader = parent.querySelector('.loader');\n  parent.removeChild(loader);\n};\n","import photo from '../../img/weather/*.svg';\n\nexport const renderCurrent = (result, parent) => {\n  const allIcons = Object.keys(photo).map((key) => {\n    return [photo[key]];\n  });\n\n  const iconsArray = allIcons.flat();\n  let icon = iconsArray.find((icon) => icon.match(result.weather.icon));\n  const html = `\n\t<div class=\"current-location\">\n\t<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\t<svg width=\"64px\" height=\"90px\" viewBox=\"0 0 64 90\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\">\n\t\t<path\n\t\t\td=\"M31.99994,0 C23.67139,0 15.6839543,3.30849594 9.7947801,9.1976701 C3.90560594,15.0868443 0.59711,23.07428 0.59711,31.40283 C0.59711,51.64417 24.49042,81.92902 30.59393,89.33502 C30.9394271,89.755965 31.4553541,89.999964 31.99993,89.999964 C32.5445059,89.999964 33.0604329,89.755965 33.40593,89.33502 C39.50945,81.92902 63.40276,51.64417 63.40276,31.40283 C63.40276,23.0742818 60.0942654,15.0868475 54.2050934,9.19767364 C48.3159214,3.30849976 40.3284882,0 31.99994,0 Z M31.99994,46.9762 C25.7010813,46.9762 20.0224404,43.1818861 17.6119631,37.362503 C15.2014858,31.5431198 16.5338755,24.8447139 20.9878397,20.3907468 C25.441804,15.9367797 32.140209,14.6043857 37.9595937,17.0148593 C43.7789784,19.4253328 47.5733,25.1039713 47.5733,31.40283 C47.5733,40.003754 40.600864,46.9762 31.99994,46.9762 L31.99994,46.9762 Z\"\n\t\t\tid=\"Shape\" fill=\"#FF6D6D\" fill-rule=\"nonzero\"></path>\n\t</svg>Current Location\n</div>\n<div class=\"condition\">\n\t<img src=\"${icon}\" alt=\"\" class=\"weather--icon\" />\n</div>\n<div class=\"location\">${result.name}</div>\n<div class=\"temperature\">${result.weather.temp}<span>ÂºC</span></div>\n<div class=\"condition_text\">${result.weather.description}</div>\n<div class=\"minmax\">min ${result.weather.temp_min} ÂºC / max ${result.weather.temp_max} ÂºC</div>\n<div class=\"next_days\">Next 5 days</div>\n</div>\n\n\t`;\n  parent.insertAdjacentHTML('afterbegin', html);\n};\n","// MODELS\nimport Current from './Models/Current';\nimport Search from './Models/Search';\n\n// VIEWS\nimport * as loader from './Views/loaderView';\nimport * as currentView from './Views/currentView';\n\nconst state = {};\n// console.log(state);\n\nconst search = new Search('Ajax');\nsearch.getWeather();\n\n// ---CURRENT LOCATION CONTROLLER---\nconst currentController = async () => {\n  const parent = document.querySelector('.main');\n  loader.renderLoader(parent);\n  if (!state.current) state.current = new Current();\n  if (state.current.availableCoords() < 2) {\n    await state.current.getCoords();\n  }\n\n  // Get weather for current location\n  if (state.current.availableCoords() === 2) {\n    await state.current.getWeather();\n    loader.clearLoader(parent);\n    currentView.renderCurrent(state.current, parent);\n  }\n};\n\ncurrentController();\n\n// ---SEARCH CONTROLLER---\nconst controlSearch = async (e) => {\n  e.preventDefault();\n  const query = 'Saskatoon';\n  if (query) {\n    state.search = new Search(query);\n    await state.search.getWeather();\n    console.log(state.search.results);\n  }\n};\n\n// Add Event Listeners\nconst form = document.querySelector('.search--form');\nform.addEventListener('submit', controlSearch);\n\n// This one is here to make sure to see it when everything is loaded, development purpose\nconsole.log(state.current);\n"]}